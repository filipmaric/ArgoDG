!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.DG=e():t.DG=e()}(self,(()=>(()=>{"use strict";var t,e={197:(t,e,i)=>{i.d(e,{CP1:()=>l,Circline:()=>p,Complex:()=>s});class s{constructor(t,e){this.re=t,this.im=e}static of_real(t){return new s(t,0)}static of_imag(t){return new s(0,t)}static get zero(){return n}static get one(){return r}static get minus_one(){return o}static get i(){return c}static get minus_i(){return h}clone(){return new s(this.re,this.im)}add(t){return new s(this.re+t.re,this.im+t.im)}mult(t){return"number"==typeof t?this.scale(number):new s(this.re*t.re-this.im*t.im,this.re*t.im+this.im*t.re)}scale(t){return new s(t*this.re,t*this.im)}uminus(){return this.scale(-1)}sub(t){return this.add(t.uminus())}norm2(){return this.re*this.re+this.im*this.im}norm(){return Math.sqrt(this.norm2())}arg(){return Math.atan2(this.im,this.re)}sgn(){return this.scale(1/this.norm())}cnj(){return new s(this.re,-this.im)}recip(){return this.cnj().scale(1/this.norm2())}div(t){return this.mult(t.recip())}static EPS=1e-8;is_zero(t){return t||(t=s.EPS),this.norm2()<t*t}is_real(){return Math.abs(this.im)<s.EPS}is_imag(){return Math.abs(this.re)<s.EPS}eq(t){return this.sub(t).is_zero()}static cnj_mix(t,e){return t.cnj().mult(e).add(e.cnj().mult(t))}static scalprod(t,e){return s.cnj_mix(other).scale(.5)}}const n=new s(0,0),r=new s(1,0),o=new s(-1,0),c=new s(0,1),h=new s(0,-1);class l{constructor(t,e){if(e||(e=s.one),this.z1=t,this.z2=e,!this.z2.is_zero()){const t=this.z2.norm();this.z1=this.z1.scale(1/t),this.z2=this.z2.scale(1/t)}}is_zero(t){return this.z1.is_zero(t)}is_inf(t){return this.z2.is_zero(t)}static of_complex(t){return new l(t)}static of_real(t){return l.of_complex(s.of_real(t))}static of_xy(t,e){return l.of_complex(new s(t,e))}static get inf(){return a}static get zero(){return u}static get one(){return _}to_complex(){return this.z1.div(this.z2)}add(t){return this.z2.is_zero()&&t.z2.is_zero()?l.inf:new l(this.z1.mult(t.z2).add(t.z1.mult(this.z2)),this.z2.mult(t.z2))}uminus(){return new l(this.z1.uminus(),this.z2)}sub(t){return this.add(t.uminus())}mult(t){return this.z1.is_zero()&&t.z2.is_zero()||t.z1.is_zero()&&this.z2.is_zero?l.one():new l(this.z1.mult(t.z1),this.z2.mult(t.z2))}reciprocal(){return new l(this.z2,this.z1)}div(t){return this.mult(t.reciprocal())}conjugate(){return new l(this.z1.cnj(),this.z2.cnj())}inversion(){return this.reciprocal().conjugate()}eq(t){return this.sub(t).is_zero()}clone(){return new l(this.z1.clone(),this.z2.clone())}static ratio(t,e,i){return t.sub(e).div(t.sub(i))}static cross_ratio(t,e,i,s){const n=t.z1.mult(e.z2).sub(e.z1.mult(t.z2)),r=i.z1.mult(s.z2).sub(s.z1.mult(i.z2)),o=t.z1.mult(s.z2).sub(s.z1.mult(t.z2)),c=i.z1.mult(e.z2).sub(e.z1.mult(i.z2));return n.mult(r).is_zero()&&o.mult(c).is_zero()?l.one():new l(n.mult(r),o.mult(c))}vec_mult(t){return this.z1.mult(t.z1).add(this.z2.mult(t.z2))}}const a=new l(s.one,s.zero),u=l.of_real(0),_=l.of_real(1);class d{constructor(t,e,i,s){this.A=t,this.B=e,this.C=i,this.D=s}static zero(){return new d(s.zero,s.zero,s.zero,s.zero)}static eye(){return new d(s.one,s.zero,s.zero,s.one)}cnj(){return new d(this.A.cnj(),this.B.cnj(),this.C.cnj(),this.D.cnj())}transpose(){return new d(this.A,this.C,this.B,this.D)}adj(){return this.cnj().transpose()}det(){return this.A.mult(this.D).sub(this.B.mult(this.C))}inv(){return this._inv||(this._inv=new d(this.D,this.B.uminus(),this.C.uminus(),this.A).multC(this.det().recip())),this._inv}qr(){if(null==this._Q||null==this._R){const t=this.C.cnj(),e=this.A.cnj(),i=Math.sqrt(t.norm2()+e.norm2()),s=e.scale(1/i),n=t.scale(1/i),r=new d(s,n,n.cnj().uminus(),s.cnj());this._Q=r.adj(),this._R=r.multM(this)}return[this._Q,this._R]}eq(t){return this.A.eq(t.A)&&this.B.eq(t.B)&&this.C.eq(t.C)&&this.D.eq(t.D)}is_hermitean(){return this.eq(this.adj())}is_zero(){return this.eq(d.zero())}multC(t){return new d(this.A.mult(t),this.B.mult(t),this.C.mult(t),this.D.mult(t))}multCP1(t){return new l(this.A.mult(t.z1).add(this.B.mult(t.z2)),this.C.mult(t.z1).add(this.D.mult(t.z2)))}multInvCP1(t){const[e,i]=this.qr(),s=e.adj().multCP1(t),n=s.z2.div(i.D),r=s.z1.sub(i.B.mult(n)).div(i.A);return new l(r,n)}multM(t){return new d(this.A.mult(t.A).add(this.B.mult(t.C)),this.A.mult(t.B).add(this.B.mult(t.D)),this.C.mult(t.A).add(this.D.mult(t.C)),this.C.mult(t.B).add(this.D.mult(t.D)))}congruence(t){return t.adj().multM(this.multM(t))}}class p{constructor(t,e,i,s){if(1==arguments.length&&arguments[0]instanceof d)this.H=arguments[0];else{if(!t.is_zero()){const n=1/t.norm();t=t.scale(n),e=e.scale(n),i=i.scale(n),s=s.scale(n)}this.H=new d(t,e,i,s)}}static mk_circle(t,e){return new p(s.one,t.uminus(),t.cnj().uminus(),t.mult(t.cnj()).sub(s.of_real(e*e)))}static mk_line(t,e){const i=e.sub(t).mult(s.i);return new p(s.zero,i,i.cnj(),s.cnj_mix(i.uminus(),t))}on_circline(t,e){return e||(e=.01),t.conjugate().vec_mult(this.H.multCP1(t)).is_zero(e)}in_disc(t){return t.conjugate().vec_mult(this.H.multCP1(t)).re<-1e-12}is_line(){return this.H.A.is_zero()}is_circle(){return!this.is_line()}circle_center(){return this.H.B.uminus().div(this.H.A)}circle_radius(){return Math.sqrt(this.H.B.mult(this.H.C).sub(this.H.A.mult(this.H.D)).div(this.H.A.mult(this.H.A)).re)}line_points(){const t=this.H.D.mult(this.H.B).uminus().div(this.H.B.mult(this.H.C).scale(2)),e=t.add(s.i.mult((this.H.B.arg()>0?this.H.B.uminus():this.H.B).sgn()));return[t,e]}static unit_circle(){return new p(s.one,s.zero,s.zero,s.minus_one)}static x_axis(){return new p(s.zero,s.i,s.minus_i,s.zero)}static y_axis(){return new p(s.zero,s.one,s.one,s.zero)}static circline3(t,e,i){return m.moebius_01inf(t,e,i).inv().moebius_circline(p.x_axis())}static same_arc(t,e,i,s){const n=l.cross_ratio(t,e,i,s);return!n.is_inf()&&n.to_complex().is_real()&&n.to_complex().re>=0}static other_arc(t,e,i,s){const n=l.cross_ratio(t,e,i,s);return!n.is_inf()&&n.to_complex().is_real()&&n.to_complex().re<0}static same_circle(t,e,i,s){const n=l.cross_ratio(t,e,i,s);return n.is_inf()||n.to_complex().is_real()}static between(t,e,i){return p.other_arc(l.inf,t,e,i)}static collinear(t,e,i){return p.same_circle(t,e,i,l.inf)}static same_side(t,e,i){return p.collinear(t,e,i)&&!p.between(t,i,e)}static h_between(t,e,i){return p.other_arc(e,t,e.inversion(),i)}three_points(){if(!this._three_points)if(this.is_line()){const[t,e]=this.line_points();this._three_points=[t,e,t.add(e.sub(t).scale(2))]}else{const t=this.circle_center(),e=this.circle_radius();this._three_points=[t.add(s.of_real(e)),t.add(s.of_real(-e)),t.add(s.of_imag(e))]}return this._three_points}random_point(){const[t,e,i]=this.three_points().map((t=>l.of_complex(t))),s=m.moebius_01inf(t,e,i),n=Math.floor(3*Math.random());let r;return r=0==n?Math.random():1==n?1/Math.random():1-1/Math.random(),s.inv().moebius_pt(l.of_real(r))}random_point_in_disc(t){const[e,i]=this.intersect(t),[s,n,r]=this.three_points().map((t=>l.of_complex(t))),o=m.moebius_01inf(s,n,r),[c,h]=[e,i].map((t=>o.moebius_pt(t).to_complex().re)).sort();let a,u=0;do{let t;if(Math.random()<.5)t=c+Math.random()*(h-c);else{const e=Math.floor(5*Math.random()),i=Math.pow(10,e)*Math.random();t=Math.random()<.5?c-i:h+i}a=o.inv().moebius_pt(l.of_real(t)),u++}while(!t.in_disc(a)||u>=100);return a}moebius_to_xaxis(){if(!this._moebius_to_xaxis){const[t,e,i]=this.three_points().map((t=>l.of_complex(t)));this._moebius_to_xaxis=m.moebius_01inf(t,e,i)}return this._moebius_to_xaxis}intersect(t){const e=this.moebius_to_xaxis(),i=e.moebius_circline(t),[n,r,o]=[i.H.A,i.H.B,i.H.D];let c,h;if(n.is_zero())return c=l.inf,r.is_imag()?[c,c]:(h=l.of_real(-o.re/(2*r.re)),[c,h].map((t=>e.moebius_inv_pt(t))));{const t=r.re*r.re-n.re*o.re;if(t<=0){const i=Math.sqrt(-t),[o,c]=[new s(-r.re/n.re,+i/n.re),new s(-r.re/n.re,-i/n.re)];return[o,c].map((t=>e.moebius_inv_pt(l.of_complex(t))))}{const i=Math.sqrt(t),[s,o]=[(-r.re+i)/n.re,(-r.re-i)/n.re];return[s,o].map((t=>e.moebius_inv_pt(l.of_real(t))))}}}transform(t){let e=this.three_points();return e.some((t=>isNaN(t.re)))?this:(e=e.map((e=>{const[i,n]=t(e.re,e.im);return l.of_complex(new s(i,n))})),p.circline3(...e))}normalize(){this.H.A.is_zero()?this.H.D.is_zero()?this.H=this.H.multC(this.H.B.recip()):this.H=this.H.multC(this.H.D.recip()):this.H=this.H.multC(this.H.A.recip())}eq(t){return this.normalize(),t.normalize(),this.H.A.eq(t.H.A)&&this.H.B.eq(t.H.B)&&this.H.C.eq(t.H.C)&&this.H.D.eq(t.H.D)}}class m{constructor(t,e,i,s){1==arguments.length&&t instanceof d?this.construct(t.A,t.B,t.C,t.D):this.construct(t,e,i,s)}construct(t,e,i,s){if(t.is_zero()){const n=e.norm();t=t.scale(1/n),e=e.scale(1/n),i=i.scale(1/n),s=s.scale(1/n)}else e=e.div(t),i=i.div(t),s=s.div(t),t=t.div(t);this.M=new d(t,e,i,s)}moebius_pt(t){return t instanceof s&&(t=CP1.of_complex(t)),this.M.multCP1(t)}moebius_inv_pt(t){return t instanceof s&&(t=CP1.of_complex(t)),this.M.multInvCP1(t)}moebius_circline(t){return new p(t.H.congruence(this.M.inv()))}static id(){return new m(d.eye())}inv(){return new m(this.M.inv())}comp(t){return new m(this.M.multM(t.M))}static moebius_01inf(t,e,i){const s=e.z1.mult(i.z2).sub(i.z1.mult(e.z2)),n=e.z1.mult(t.z2).sub(t.z1.mult(e.z2));return t.z1.mult(i.z2).sub(i.z1.mult(t.z2)),new m(t.z2.mult(s),t.z1.mult(s).uminus(),i.z2.mult(n),i.z1.mult(n).uminus())}}},83:(t,e,i)=>{i.d(e,{N:()=>s});class s{constructor(t,e){const i=document.createElement("div");e.appendChild(i);const s=document.createElement("button");s.innerHTML="<<",s.addEventListener("click",t.prevAnimationStep.bind(t)),i.appendChild(s);const n=document.createElement("button");n.innerHTML=">>",n.addEventListener("click",t.nextAnimationStep.bind(t)),i.append(n)}}},576:(t,e,i)=>{i.d(e,{Km:()=>n,b9:()=>r});const s=document.createElement("canvas").getContext("2d");function n(t){if(!t)return 1;const e=t.match(/^rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+([.]\d*)?)\s*\)$/i);return e?e[4]:1}function r(t,e){const i=function(t){s.fillStyle=t;const e=s.fillStyle;return"#"==e[0]?function(t){const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}(e):function(t){const e=t.match(/^rgba?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*(\d+([.]\d*)?))?\s*\)$/i);return e?{r:e[1],g:e[2],b:e[3]}:null}(e)}(t);return"rgba("+i.r+", "+i.g+", "+i.b+", "+e+")"}},102:(t,e,i)=>{i.d(e,{If:()=>X,rW:()=>H,jt:()=>J,KM:()=>tt,Xw:()=>I,lZ:()=>L,lI:()=>et,ii:()=>T,qS:()=>K,LW:()=>Z,hB:()=>$,Pd:()=>V,q3:()=>W,Pw:()=>R,PR:()=>N,Zt:()=>B,jv:()=>q,ES:()=>Q,i7:()=>F,V_:()=>G,xm:()=>O,d2:()=>U,dt:()=>S,EX:()=>Y,cY:()=>E,ei:()=>A});var s=i(197),n=i(576);class r{static num_objects=0;constructor(){this._ID=r.num_objects++,this._dependent_objects=[],this._valid=!0,this._style={},this._style._highlight=!1}type(){return"object"}isFreePoint(){return!1}isPoint(){return!1}isLine(){return!1}isCircle(){return!1}fireChangeEvent(){T()}show(t,e){return null==t&&(t=!0),this._style._hide=!t,(void 0===e||e)&&this.fireChangeEvent(),this}hide(t){return this.show(!1,t),this}hidden(){return this._style._hide}visible(){return!this.hidden()}color(t,e){return void 0===t?this._style._color?this._style._color:"black":(this._style._color=t,(void 0===e||e)&&this.fireChangeEvent(),this)}width(t,e){return void 0===t?this._style._width?this._style._width:1:(this._style._width=t,(void 0===e||e)&&this.fireChangeEvent(),this)}dashed(t){return this._style._dash=[8,4],(void 0===t||t)&&this.fireChangeEvent(),this}solid(t){return this._style._dash=[],(void 0===t||t)&&this.fireChangeEvent(),this}dash(){return this._style._dash?this._style._dash:[]}opacity(t,e){return void 0===t?(0,n.Km)(this.color()):(this.color((0,n.b9)(this.color(),t)),(void 0===e||e)&&this.fireChangeEvent(),this)}size(t,e){return void 0===t?this._style._size?this._style._size:1:(this._style._size=t,(void 0===e||e)&&this.fireChangeEvent(),this)}defaultLabel(){return this.type()+"("+this._ID+")"}defaultDescription(){return""}label(t,e,i){return void 0===t?this._style._label?this._style._label:this.defaultLabel():(this._style._label=t,this._style._showing_label=null==e||e,(void 0===i||i)&&this.fireChangeEvent(),this)}hasLabel(){return void 0!==this._style._label}showingLabel(){return this._style._showing_label}description(t,e){return null!=t?(this._style._description=t,(void 0===e||e)&&this.fireChangeEvent(),this):this._style._description?this._style._description:this.defaultDescription()}addDescription(t,e){return this._style._description+=t,(void 0===e||e)&&this.fireChangeEvent(),this}describe(){let t;return this.hasLabel()?(t=this.label(),this.description()&&(t+=": "+this.description())):t=this.description()?this.description():this.label(),t}highlight(t,e){if(void 0===t)return!!this._style._highlight&&this._style._highlight;t!=this._style._highlight&&(this._style._highlight=t,(void 0===e||e)&&this.fireChangeEvent())}style(t,e){return void 0===t?this._style:(this._style=t,(void 0===e||e)&&this.fireChangeEvent(),this)}draw(t){this.hidden()||this._valid&&(this.drawMe(t),this.showingLabel()&&this.drawLabel(t))}drawMe(t){}drawLabel(t){}addDependent(t){this._dependent_objects.push(t)}recalc(){let t=[];const e=r.num_objects,i=new Array(e).fill(0),s=new Array(e).fill(null);function n(e){i[e._ID]++,null==s[e._ID]&&(s[e._ID]=e,t.push(e))}for(s[this._ID]=this,this._dependent_objects.forEach(n);t.length>0;)t.shift()._dependent_objects.forEach(n);for(t=[this._ID];t.length>0;){const e=t.shift();s[e].recalcMe(),s[e]._dependent_objects.forEach((e=>{0==--i[e._ID]&&t.push(e._ID)}))}}recalcMe(){}eq(t){return this.isPoint()&&t.isPoint()?this.cp1().eq(t.cp1()):this instanceof l&&t instanceof l&&this.circline().eq(t.circline())}clone(){const t=new o(this);return H(t,!1),t}}class o extends r{constructor(t){return super(),this._object=t,this._style={...this._object.style()},new Proxy(this,this)}type(){return"clone"}drawMe(t){const e=this._object.style();this._object.style(this._style,!1),this._object.drawMe(t),this._object.style(e,!1)}drawLabel(t){const e=this._object.style();this._object.style(this._style,!1),this._object.drawLabel(t),this._object.style(e,!1)}isPoint(){return this._object.isPoint()}get(t,e){return this[e]||this._object[e]}}class c extends r{constructor(t,e){return super(),this._validity_check=void 0,2==arguments.length&&(this._valid=this.moveTo(t,e)),this}type(){return"point"}fix(){return this._fixed=!0,this}free(){return this._fixed=!1,this}isFreePoint(){return!this._fixed}isPoint(){return!0}validityCheck(t){return this._validity_check=t,this}moveTo(t,e){return!(null!=this._validity_check&&!this._validity_check(s.CP1.of_xy(t,e))||(this._coords=new s.CP1(new s.Complex(t,e)),this.recalc(),this.fireChangeEvent(),0))}is_inf(){return this._coords.is_inf()}to_complex(){return this._coords.to_complex()}x(){return this.to_complex().re}y(){return this.to_complex().im}coords(){const t=this.to_complex();return[t.re,t.im]}cp1(){return this._coords}eq(t){return t instanceof s.CP1?this.cp1().eq(t):!!t.isPoint()&&this.cp1().eq(t.cp1())}distance(t){return this.to_complex().sub(t.to_complex()).norm()}isNear(t,e,i){const[s,n]=i(this.x(),this.y()),r=(s-t)*(s-t)+(n-e)*(n-e);let o=5;return o*=this.size(),r<=o*o}drawMe(t){this.is_inf()||(this.highlight()&&t.point(this.x(),this.y(),{color:(0,n.b9)(this.color(),.5*this.opacity()),size:1.5*this.size()}),t.point(this.x(),this.y(),{color:this.color(),size:this.size()}))}drawLabel(t){!this.is_inf()&&this._style._label&&t.text(this.x(),this.y(),this._style._label)}}class h extends c{constructor(t,e,i,s,n){super(),e=e||-1,i=i||1,s=s||-1,n=n||1,this._xmin=e,this._xmax=i,this._ymin=s,this._ymax=n,this._validity_check=t||(t=>!0),this.recalcMe()}type(){return"random point"}isFreePoint(){return!1}recalcMe(){let t,e,i=0;do{t=this._xmin+Math.random()*(this._xmax-this._xmin),e=this._ymin+Math.random()*(this._ymax-this._ymin),this._coords=new s.CP1(new s.Complex(t,e)),i++}while(!this._validity_check(this._coords)&&i<100);if(100==i)throw"Could not generate valid random point"}}class l extends r{constructor(){super()}type(){return"circline"}drawMe(t){function e(e,i){if(e._circline.is_line()){const[s,n]=e._circline.line_points(),[r,o]=[s.re,s.im],[c,h]=[n.re,n.im];t.line(r,o,c,h,i)}else{const s=e._circline.circle_center(),n=e._circline.circle_radius(),[r,o]=[s.re,s.im];t.circle(r,o,n,i)}}e(this,{color:this.color(),width:this.width(),dash:this.dash()}),this.highlight()&&e(this,{color:(0,n.b9)(this.color(),.5*(0,n.Km)(this.color())),width:3*this.width(),dash:this.dash()})}drawLabel(t){if(this._circline.is_line()&&this._style._label){const[e,i]=this._circline.line_points(),[s,n]=[e.re,e.im],[r,o]=[i.re,i.im];t.line_label(s,n,r,o,this._style._color,this._style._label)}}circline(){return this._circline}randomPoint(t){return new _(this,{validity_check:t})}randomPointInDisc(t,e){return new _(this,{validity_check:e,disc:t})}intersect(t){return this.circline().intersect(t.circline())}}class a extends l{constructor(t,e){super(),this._p1=t,this._p2=e,t.addDependent(this),e.addDependent(this),this.recalcMe()}type(){return"line"}defaultDescription(){return"line "+this._p1.label()+this._p2.label()}recalcMe(){this._valid=this._p1._valid&&this._p2._valid,this._circline=s.Circline.circline3(this._p1.cp1(),this._p2.cp1(),s.CP1.inf)}static intersect(t,e){const i=t.intersect(e);return i[0].is_inf()?i[1].is_inf()?s.CP1.inf:i[1]:i[0]}isLine(){return!0}circline(){return this._circline}isNear(t,e,i){return this._circline.transform(i).on_circline(s.CP1.of_complex(new s.Complex(t,e)))}}class u extends a{constructor(t,e){super(t,e)}type(){return"segment"}defaultDescription(){return"segment "+this._p1.label()+this._p2.label()}drawMe(t){const[e,i]=this._p1.coords(),[s,n]=this._p2.coords();t.segment(e,i,s,n,{color:this._style._color,width:this._style._width,dash:this._style._dash})}drawLabel(t){}}class _ extends c{constructor(t,e){super(),this._line=t,this._validity_check=e.validity_check?e.validity_check:t=>!0,this._disc=e.disc,t.addDependent(this),this.recalcMe(),H(this,!1),this.fix()}type(){return"point on circline"}isFreePoint(){return!this._fixed}recalcMe(){this._valid=this._line._valid;let t=0;do{this._disc?this._coords=this._line.circline().random_point_in_disc(this._disc):this._coords=this._line.circline().random_point(),t++}while(!this._validity_check(this._coords)&&t<100);if(100==t)throw this._valid=!1,console.log(this._line.circline()),"Unable to generate valid random point"}}class d extends l{constructor(t,e){super(),this._c=t,this._p=e,t.addDependent(this),e.addDependent(this),this.recalcMe()}type(){return"circle"}defaultDescription(){return"circle c("+this._c.label()+", "+this._p.label()+")"}isCircle(){return!0}recalcMe(){this._valid=this._c._valid&&this._p._valid,this._r=this._c.distance(this._p),this._circline=s.Circline.mk_circle(this._c.to_complex(),this._r)}center(){return new p(this)}inDisc(t){return this._circline.in_disc(t)}inDiscXY(t,e){return this._circline.in_disc(s.CP1.of_complex(new s.Complex(t,e)))}onCircleXY(t,e){return this._circline.on_circline(s.CP1.of_complex(new s.Complex(t,e)),.001)}isNear(t,e,i){return this._circline.transform(i).on_circline(s.CP1.of_complex(new s.Complex(t,e)))}static intersectLC(t,e){return t.intersect(e)}static intersectCC(t,e){return t.intersect(e)}}class p extends c{constructor(t){super(),this._circle=t,t.addDependent(this),this.recalcMe(),H(this,!1)}type(){return"circle center"}isFreePoint(){return!1}defaultDescription(){return"center of "+this._circle.label()}recalcMe(){this._valid=this._circle._valid,this._coords=s.CP1.of_complex(this._circle.circline().circle_center())}}class m extends c{constructor(t,e){super(),this._l1=t,this._l2=e,t.addDependent(this),e.addDependent(this),this.recalcMe()}type(){return"intersectLL"}defaultDescription(){return"intersection of "+this._l1.label()+" and "+this._l2.label()}isFreePoint(){return!1}recalcMe(){this._valid=this._l1._valid&&this._l2._valid,this._coords=a.intersect(this._l1,this._l2)}}class b extends r{constructor(){super(),this.hide(!1)}type(){return"intersections"}intersectionPoint(t,e){const i=new w(this,t,this.description(),e);return this.addDependent(i),i}any(t){return this.intersectionPoint((t=>!0),t)}both(t){return[this.intersectionPoint(0,!1),this.intersectionPoint(1,t)]}select(t,e){return this.intersectionPoint(t,e)}selectPoint(t){if("function"==typeof t){const e=this._intersections.filter(t);if(e.length>0)return e[0];throw console.log(t),"No selected points"}if("number"==typeof t)return this._intersections[t];throw"Unknown criterion"}isNear(t,e,i){return!1}}class f extends b{constructor(t,e){super(),this._l=t,this._c=e,e.addDependent(this),t.addDependent(this),this.recalcMe()}type(){return"intersectLC"}defaultDescription(){return"intersection of "+this._l.label()+" and "+this._c.label()}recalcMe(){this._valid=this._l._valid&&this._c._valid,this._intersections=d.intersectLC(this._l,this._c)}}class v extends b{constructor(t,e){super(),this._c1=t,this._c2=e,t.addDependent(this),e.addDependent(this),this.recalcMe()}type(){return"intersectCC"}defaultDescription(){return"intersection of "+this._c1.label()+" and "+this._c2.label()}recalcMe(){this._valid=this._c1._valid&&this._c2._valid,this._intersections=d.intersectCC(this._c1,this._c2)}}class w extends c{constructor(t,e,i,s){super(),this._intersections=t,this._selectionCriterion=e,this.description(i,!1),this.recalcMe(),H(this,s)}type(){return"intersection point"}isFreePoint(){return!1}recalcMe(){this._valid=this._intersections._valid;try{this._coords=this._intersections.selectPoint(this._selectionCriterion)}catch(t){console.log(t),this._valid=!1}}}class g extends r{constructor(t,e,i,s){super(),this._condition=t,this._thenObject=e,this._elseObject=i,this._dependencies=s,e.addDependent(this),i.addDependent(this),s.forEach((t=>t.addDependent(this))),this.recalcMe()}type(){return"if"}isPoint(){return this._object.isPoint()}isLine(){return this._object.isLine()}isCircle(){return this._object.isLine()}color(t){return void 0===t?this._object.color():(this._thenObject.color(t),this._elseObject.color(t),this)}width(t){return void 0===t?this._object.width():(this._thenObject.width(t),this._elseObject.width(t),this)}label(t,e,i){return void 0===t?this._object.label():(this._thenObject.label(t,e,i),this._elseObject.label(t,e,i),this)}showingLabel(){return this._object.showingLabel()}hasLabel(){return this._object.hasLabel()}defaultDescription(){return this._object.defaultDescription()}description(t){return void 0===t?this._object.description():(this._thenObject.description(t),this._elseObject.description(t),this)}style(t,e){if(void 0===t)return this._object.style();this._thenObject.style(t,e),this._elseObject.style(t,e)}is_inf(){return this._object.is_inf()}to_complex(){return this._object.to_complex()}cp1(){return this._object.cp1()}x(){return this._object.x()}y(){return this._object.y()}coords(){return this._object.coords()}distance(t){return this._object.distance(t)}intersect(t){return this._object.intersect(t)}circline(){return this._object.circline()}randomPoint(){return this._object.randomPoint()}recalcMe(){this._condition(...this._dependencies)?this._object=this._thenObject:this._object=this._elseObject,this._valid=this._object._valid}drawMe(t){this._object.drawMe(t)}highlight(t){this._object.highlight(t)}isNear(t,e,i){return this._object.isNear(t,e,i)}drawLabel(t){this._object.drawLabel(t)}}class y extends l{constructor(t,e){super(),this._p1=t,this._p2=e,t.addDependent(this),e.addDependent(this),this.recalcMe()}type(){return"poincare line"}defaultDescription(){return"Poincare line "+this._p1.label()+this._p2.label()}recalcMe(){const t=this._p1.cp1().to_complex(),e=this._p2.cp1().to_complex(),i=s.Complex.i.mult(t.mult(e.cnj()).sub(e.mult(t.cnj()))),n=s.Complex.i.mult(e.scale(t.norm2()+1).sub(t.scale(e.norm2()+1)));this._circline=new s.Circline(i,n,n.cnj(),i),this._valid=this._p1._valid&&this._p2._valid}}class x extends l{constructor(t,e){super(),this._c=t,this._p=e,t.addDependent(this),e.addDependent(this),this.recalcMe()}type(){return"poincare circle"}defaultDescription(){return"Poincare circle c("+this._c.label()+", "+this._p.label()+")"}recalcMe(){const t=this._c.cp1().to_complex(),e=this._p.cp1().to_complex(),i=Math.acosh(1+2*t.sub(e).norm2()/((1-t.norm2())*(1-e.norm2()))),n=t.scale(1/((1-t.norm2())*(Math.cosh(i)-1)/2+1)),r=(1-t.norm2())*Math.sinh(i)/((1-t.norm2())*(Math.cosh(i)-1)+2);this._circline=s.Circline.mk_circle(n,r),this._valid=this._c._valid&&this._p._valid}}var j=i(512),z=i(83),P=i(445);let C=new class{constructor(){this._objects=[],this._views=[],this._animation_step=-1}addView(t){this._views.push(t),t.addConstruction(this)}addObject(t,e){this._objects.push(t),(void 0===e||e)&&this.draw()}drawObjects(t){this._views.forEach((e=>{e.clear(),t.filter((t=>!t.isPoint())).forEach((t=>{t.draw(e)})),t.filter((t=>t.isPoint())).forEach((t=>{t.draw(e)}))}))}highlight(t,e,i,s){this._objects.forEach((n=>{n.highlight(n.isNear(t,e,i)&&s.shouldHighlight(n))}))}draw(){this.animationInProgress()?this.drawAnimationStep():this.drawObjects(this._objects)}animationInProgress(){return-1!=this._animation_step}drawAnimationStep(){const t=this._objects.slice(0,this._animation_step+1);this.drawObjects(t);const e=this._objects[this._animation_step];this._views.forEach((t=>{t.message(e.describe())}))}doAnimationStep(t){do{const e=this._objects.length;this._animation_step=(this._animation_step+e+t)%e}while(!this._objects[this._animation_step].visible());this.drawAnimationStep()}nextAnimationStep(){this.doAnimationStep(1)}prevAnimationStep(){this.doAnimationStep(-1)}animate(){var t=this;window.setInterval((function(){t.nextAnimationStep(),t.drawAnimationStep()}),1e3)}findObjectsAt(t,e,i){return this._objects.filter((t=>!t.hidden())).filter((s=>s.isNear(t,e,i)))}findFreePointAt(t,e,i){return this._objects.filter((t=>t.isFreePoint()&&!t.hidden())).find((s=>s.isNear(t,e,i)))}findPointAt(t,e,i){return this._objects.filter((t=>t.isPoint()&&!t.hidden())).find((s=>s.isNear(t,e,i)))}findLineAt(t,e,i){return this._objects.filter((t=>t.isLine()&&!t.hidden())).find((s=>s.isNear(t,e,i)))}findCircleAt(t,e,i){return this._objects.filter((t=>t.isCircle()&&!t.hidden())).find((s=>s.isNear(t,e,i)))}includes(t){return this._objects.some((e=>e.label()==t))}},M=null,D=null,k=null;function E(t,e,i,s,n,r){M=2==arguments.length?new j.G(t,e):new j.G(t,e,i,s,n,r),C.addView(M)}function L(){return C}function A(){return M}function H(t,e){C.addObject(t,e)}function T(){C.draw()}function O(t,e,i){const s=new c(t,e);return i&&s.validityCheck(i),H(s),s}function S(t,e,i,s,n){const r=new h(t,e,i,s,n);return H(r),r}function q(t,e){const i=new a(t,e);return H(i),i}function I(t,e,i){const s=new d(t,e);return H(s,i),s}function B(t,e,i){const s=new m(t,e);return H(s,i),s}function N(t,e,i){const s=new f(t,e);return H(s,i),s}function R(t,e,i){const s=new v(t,e);return H(s,i),s}function X(t,e,i,s,n){const r=new g(t,e,i,s);return H(r,n),r}function G(t,e,i){const s=new y(t,e);return H(s,i),s}function F(t,e,i){const s=new x(t,e);return H(s,i),s}function Y(t,e,i){const s=new u(t,e);return H(s,i),s}function Z(t,e,i){return C.findFreePointAt(t,e,i)}function W(t,e,i){return C.findPointAt(t,e,i)}function $(t,e,i){return C.findLineAt(t,e,i)}function K(t,e,i){return C.findCircleAt(t,e,i)}function V(t,e,i){return C.findObjectsAt(t,e,i)}function Q(){C.nextAnimationStep()}function U(){C.prevAnimationStep()}function J(){C.animate()}function tt(){D||(D=new z.N(C,M.canvas().container()))}function et(){k||(k=new P.l(C,M,M.canvas().container()))}},747:(t,e,i)=>{i.d(e,{Cz:()=>y,EX:()=>h,H2:()=>b,I2:()=>P,M:()=>w,Mf:()=>z,PR:()=>a,Pw:()=>d,Si:()=>x,Xw:()=>_,YF:()=>m,Z:()=>g,Zt:()=>l,cP:()=>A,gd:()=>o,jD:()=>D,jM:()=>u,jv:()=>c,p0:()=>L,qw:()=>p,rG:()=>E,sG:()=>C,sO:()=>k,sk:()=>v,xb:()=>f,xm:()=>r,yP:()=>M,zd:()=>j});var s=i(102),n=i(197);function r(t,e,i){return s.xm(t,e,i)}const o=r;function c(t,e,i){return s.jv(t,e,i)}function h(t,e,i){return s.EX(t,e,i)}function l(t,e,i){return s.Zt(t,e,i)}function a(t,e,i){return s.PR(t,e,!1).both(i)}function u(t,e,i,n){return s.PR(t,e,!1).select((t=>!t.eq(i.cp1())),n)}function _(t,e,i){return s.Xw(t,e,i)}function d(t,e,i){return s.Pw(t,e,!1).both(i)}function p(t,e,i,n){return s.Pw(t,e,!1).select((t=>!t.eq(i.cp1())),n)}function m(t,e,i){const s=_(t,e,!1).hide(!1),n=_(e,t,!1).hide(!1),[r,o]=d(s,n,!1).map((t=>t.hide(!1))),h=c(r,o,i);return h.description("Bisector of segment "+t.label()+e.label(),!1),h}function b(t,e,i){const n=l(m(t,e,!1).hide(!1),c(t,e,!1).hide(!1),!1).hide(!1),r=s.If(((t,e)=>t.eq(e)),e.clone().hide(!1),n,[t,e],i);return r.description("Midpoint of segment "+t.label()+e.label()),r}function f(t,e,i){return _(l(c(t,e,!1).hide(!1),m(t,e,!1).hide(!1),!1).hide(!1),t,i)}function v(t,e,i){const s=_(e,t.randomPoint().hide(!1),!1).hide(!1),[n,r]=a(t,s,!1).map((t=>t.hide(!1))),o=m(n,r,i);return o.description("Drop perpendicular from point "+e.label()+" onto line "+t.label(),!1),o}function w(t,e,i){const s=l(v(t,e,!1).hide(!1),t,!1);return s.description("Project point "+e.label()+" onto line "+t.label(),i),s}function g(t,e,i){const s=_(t,l(v(e,t,!1).hide(!1),e,!1).hide(!1),!1);return s.description("Circle centered in "+t.label()+" touching line "+e.label(),i),s}function y(t,e,i){const s=f(e.center().hide(!1),t,!1).hide(!1),[n,r]=d(e,s,!1).map((t=>t.hide(!1)));return[c(t,n,!1).hide(!1),c(t,r,!1).hide(i)]}function x(t,e,i,n){const[r,o]=y(t,e,!1),c=s.If(((t,e)=>t.eq(e)),o,r,[i,r],!1);return c.description("Tangent from point "+t.label()+" to circle "+e.label(),!1),c.show(n)}function j(){}function z(t,e,i){const s=v(t,e,!1).hide(!1);return v(s,e,i)}function P(t,e,i,n,r,o){const h=function(t,e,i,n,r){const o=Math.abs(i),h=Math.abs(n),a=s.dt().hide(!1);t.addDependent(a),e.addDependent(a);const d=c(t,a,!1).hide(!1),p=[t,a];for(let t=0;t<Math.max(o,h);t++){const t=p[p.length-1],e=p[p.length-2],i=u(d,_(t,e,!1).hide(!1),e,!1).hide(!1);p.push(i)}const m=z(c(e,p[o],!1).hide(!1),p[h],!1).hide(!1);let b=l(c(t,e,!1).hide(!1),m,!1).hide(!1);return i*n<0&&(b=D(t,b,!1).hide(!1)),s.If(((t,e)=>t.eq(e)),t.clone().hide(),b,[t,e],!1)}(t,e,n,r).hide(!1),a=function(t,e,i,n){const r=c(t,e,!1).hide(!1),o=c(t,i,!1).hide(!1),h=l(z(r,i,!1).hide(!1),z(o,e,!1).hide(!1),!1).hide(!1);return s.If(((t,e)=>t.eq(e)),i.clone().hide(!1),s.If(((t,e)=>t.eq(e)),e.clone().hide(!1),h,[t,i]).hide(!1),[t,e],!1)}(t,h,i).show(!1);return a.description("Point X such that "+t.label()+e.label()+":"+i.label()+"X = "+n+":"+r,o),a}function C(){}function M(t,e,i,r){const o=_(e,t,!1).hide(!1),h=(c(e,t,!1).hide(!1),c(e,i,!1).hide(!1)),l=s.PR(h,o,!1).select((t=>n.Circline.same_side(t,i.cp1(),e.cp1())),!1).hide(!1),a=_(t,l,!1).hide(!1),u=_(l,t,!1).hide(!1),d=s.Pw(a,u,!1).any(!1).hide(!1),p=c(e,d,!1);return p.description("Angle "+t.label()+e.label()+i.label()+" bisector",r),p}function D(t,e,i){const n=u(c(t,e,!1).hide(!1),_(t,e,!1).hide(!1),e,!1).hide(!1),r=s.If(((t,e)=>t.eq(e)),e.clone().hide(!1),n,[t,e],!1);return r.description("Reflect point "+e.label()+" over point "+t.label(),i),r}function k(t,e,i){const n=v(t,e,!1).hide(!1),r=l(n,t,!1).hide(!1),o=u(n,_(r,e,!1).hide(!1),e,!1).hide(!1),c=s.If(((t,e)=>t.eq(e)),e.clone().hide(!1),o,[e,r],!1);return c.description("Reflect point "+e.label()+" over line "+t.label(),i),c}function E(t,e,i,s){return l(m(e,i,!1).hide(!1),m(t,i,!1).hide(!1),s)}function L(t,e,i,n){const r=s.dt().hide(!1);t.addDependent(r),e.addDependent(r),i.addDependent(r);const o=c(r,t,!1).hide(!1),h=c(r,e,!1).hide(!1),a=o.randomPoint().hide(!1),u=l(h,c(a,i,!1).hide(!1),!1).hide(!1),_=l(c(t,u,!1).hide(!1),c(e,a,!1).hide(!1),!1).hide(!1);return l(c(t,e,!1).hide(!1),c(r,_,!1).hide(!1),n)}function A(t,e,i){const s=[t,e,i],n=c(e,i).label("a").color("black").width(2);s.push(n);const r=c(t,i).label("b").color("black").width(2);s.push(r);const o=c(t,e).label("c").color("black").width(2);s.push(o);const h=m(e,i).color("blue").label("b_{a}");s.push(h);const a=m(t,i).color("blue").label("b_{b}");s.push(a);const u=m(t,e).color("blue").label("b_{c}");s.push(u);const d=l(h,a).color("blue").label("O");s.push(d);const p=_(d,t).color("blue");s.push(p);const g=b(e,i).color("green").label("M_{a}");s.push(g);const y=b(t,i).color("green").label("M_{b}");s.push(y);const x=b(t,e).color("green").label("M_{c}");s.push(x);const j=M(e,t,i).color("orange").label("t_{a}");s.push(j);const z=M(t,e,i).color("orange").label("t_{b}");s.push(z);const P=M(e,i,t).color("orange").label("t_{c}");s.push(P);const C=l(j,z).color("orange").label("I");s.push(C);const D=l(j,n).color("orange").label("T_{a}");s.push(D);const k=l(z,r).color("orange").label("T_{b}");s.push(k);const L=l(P,o).color("orange").label("T_{c}");s.push(L);const A=v(n,C).color("Chocolate").label("t'_{a}");s.push(A);const H=v(r,C).color("Chocolate").label("t'_{b}");s.push(H);const T=v(o,C).color("Chocolate").label("t'_{c}");s.push(T);const O=l(A,n).color("Chocolate").label("T'_{a}");s.push(O);const S=l(H,r).color("Chocolate").label("T'_{b}");s.push(S);const q=l(T,o).color("Chocolate").label("T'_{c}");s.push(q);const I=_(C,O).color("orange").label("i");s.push(I);const B=v(n,t).color("red").label("h_{a}");s.push(B);const N=v(r,e).color("red").label("h_{b}");s.push(N);const R=v(o,i).color("red").label("h_{c}");s.push(R);const X=l(B,N).color("red").label("H");s.push(X);const G=l(B,n).color("red").label("H_{a}");s.push(G);const F=l(N,r).color("red").label("H_{b}");s.push(F);const Y=l(R,o).color("red").label("H_{c}");s.push(Y);const Z=_(g,e).color("DimGray");s.push(Z);const W=_(y,t).color("DimGray");s.push(W);const $=_(x,t).color("DimGray");s.push($);const K=c(t,g).color("green").label("m_{a}");s.push(K);const V=c(e,y).color("green").label("m_{b}");s.push(V);const Q=c(i,x).color("green").label("m_{c}");s.push(Q);const U=l(K,V).color("green").label("G");s.push(U);const J=c(g,y).color("DarkTurquoise");s.push(J);const tt=c(g,x).color("DarkTurquoise");s.push(tt);const et=c(y,x).color("DarkTurquoise");s.push(et);const it=c(d,X).color("purple").label("e");s.push(it);const st=b(t,X).color("purple").label("E_{a}");s.push(st);const nt=b(e,X).color("purple").label("E_{b}");s.push(nt);const rt=b(i,X).color("purple").label("E_{c}");s.push(rt);const ot=E(g,y,x).color("purple").label("N");s.push(ot);const ct=_(ot,g).color("purple").label("Ec");s.push(ct);const ht=_(st,t).color("magenta");s.push(ht);const lt=_(nt,e).color("magenta");s.push(lt);const at=_(rt,i).color("magenta");s.push(at);const ut=l(h,j).label("N_{a}").color("DeepPink");s.push(ut);const _t=l(a,z).label("N_{b}").color("DeepPink");s.push(_t);const dt=l(u,P).label("N_{c}").color("DeepPink");s.push(dt);const pt=_(ut,C).color("DeepPink");s.push(pt);const mt=_(_t,C).color("DeepPink");s.push(mt);const bt=_(dt,C).color("DeepPink");s.push(bt);const ft=w(r,D).color("Olive").label("T_{ab}");s.push(ft);const vt=w(o,D).color("Olive").label("T_{ac}");s.push(vt);const wt=_(D,ft).color("Olive").label("c_{Ta}");s.push(wt);const gt=w(n,k).color("Olive").label("T_{ba}");s.push(gt);const yt=w(o,k).color("Olive").label("T_{bc}");s.push(yt);const xt=_(k,gt).color("Olive").label("c_{Tb}");s.push(xt);const jt=w(n,L).color("Olive").label("T_{ca}");s.push(jt);const zt=w(r,L).color("Olive").label("T_{cb}");s.push(zt);const Pt=_(L,jt).color("Olive").label("c_{Tc}");s.push(Pt);const Ct=v(j,t).color("tomato").label("s_{a}");s.push(Ct);const Mt=v(z,e).color("tomato").label("s_{b}");s.push(Mt);const Dt=v(P,i).color("tomato").label("s_{c}");s.push(Dt);const kt=l(Mt,Dt).color("tomato").label("I_{a}");s.push(kt);const Et=l(Ct,Dt).color("tomato").label("I_{b}");s.push(Et);const Lt=l(Ct,Mt).color("tomato").label("I_{c}");s.push(Lt);const At=w(n,kt).color("tomato").label("S'_{a}");s.push(At);const Ht=w(r,Et).color("tomato").label("S'_{b}");s.push(Ht);const Tt=w(o,Lt).color("tomato").label("S'_{b}");s.push(Tt);const Ot=_(kt,At).color("tomato").label("i_{a}");s.push(Ot);const St=_(Et,Ht).color("tomato").label("i_{b}");s.push(St);const qt=_(Lt,Tt).color("tomato").label("i_{c}");s.push(qt);const It=l(Ct,n).color("tomato").label("S_{a}");s.push(It);const Bt=l(Mt,r).color("tomato").label("S_{b}");s.push(Bt);const Nt=l(Dt,o).color("tomato").label("S_{c}");s.push(Nt);const Rt=f(D,It).color("IndianRed");s.push(Rt);const Xt=f(k,Bt).color("IndianRed");s.push(Xt);const Gt=f(L,Nt).color("IndianRed");s.push(Gt);const Ft=c(C,g).color("DarkGray").width(1.5);s.push(Ft);const Yt=c(t,At).color("DarkGray").width(1.5);s.push(Yt);const Zt=c(C,y).color("DarkGray").width(1.5);s.push(Zt);const Wt=c(e,Ht).color("DarkGray").width(1.5);s.push(Wt);const $t=c(C,x).color("DarkGray").width(1.5);s.push($t);const Kt=c(i,Tt).color("DarkGray").width(1.5);return s.push(Kt),s.map((t=>t.hide())),s}},445:(t,e,i)=>{i.d(e,{$:()=>u,l:()=>x}),i(512);var s=i(747),n=i(102);class r{constructor(t){this._view=t}getMousePosition(t){return[t.offsetX,t.offsetY]}mousemove(t){}mousedown(t){}mouseup(t){}keydown(t){}getObject(){}}class o{shouldHighlight(t){return!1}}const c=new class extends o{shouldHighlight(t){return t.isFreePoint()}},h=new class extends o{shouldHighlight(t){return t.isPoint()}},l=new class extends o{shouldHighlight(t){return t.isLine()}},a=new class extends o{shouldHighlight(t){return t.isCircle()}};class u extends r{constructor(t,e){super(t),t.setHighlighter(c),this._mousedown=!1,this._dragPoint=void 0,this._keyboardTarget=void 0,this._construction=e}mousemove(t){if(this._mousedown&&void 0!==this._dragPoint){const[e,i]=this.getMousePosition(t),[s,n]=this._view.transformInverse(e,i);if(!this._dragPoint.moveTo(s,n)){const t=10;for(let s=1;s<=t;s++){let t=[];for(let e=-s;e<=s;e++)t.push([e,-s]);for(let e=1-s;e<=s;e++)t.push([s,e]);for(let e=s-1;e>=-s;e--)t.push([e,s]);for(let e=s-1;e>=1-s;e--)t.push([-s,e]);for(let s=0;s<t.length;s++){const[n,r]=t[s],[o,c]=this._view.transformInverse(e+n,i+r);if(this._dragPoint.moveTo(o,c))return}}}}}mousedown(t){this._mousedown=!0;const[e,i]=this.getMousePosition(t);this._construction?this._dragPoint=this._construction.findFreePointAt(e,i,this._view.transform.bind(this._view)):this._dragPoint=n.LW(e,i,this._view.transform.bind(this._view)),this._keyboardTarget=this._dragPoint}mouseup(t){this._mousedown=!1,this._dragPoint=void 0}keydown(t){if(!this._keyboardTarget)return;const e=this._keyboardTarget;let[i,s]=[e.x(),e.y()],[n,r]=this._view.transform(i,s);"ArrowRight"==t.key?n+=1:"ArrowLeft"==t.key&&(n-=1),"ArrowUp"==t.key?r-=1:"ArrowDown"==t.key&&(r+=1),[i,s]=this._view.transformInverse(n,r),e.moveTo(i,s)}}class _ extends r{constructor(t,e,i,s){super(t),this._object=void 0,this._types=e,this._selected=[],this._construction=i,this._callback=s,this._view.message("Select a "+this.typeName(this._types[0])),this._view.setHighlighter(this.highlighter(this._types[0]))}typeName(t){return"p"==t?"point":"l"==t?"line":"c"==t?"circle":void 0}highlighter(t){return"p"==t?h:"l"==t?l:"c"==t?a:void 0}mouseup(t){const[e,i]=this.getMousePosition(t);let s;const n=this._selected.length;if("p"==this._types[n]?s=this._construction.findPointAt(e,i,this._view.transform.bind(this._view)):"l"==this._types[n]?s=this._construction.findLineAt(e,i,this._view.transform.bind(this._view)):"c"==this._types[n]&&(s=this._construction.findCircleAt(e,i,this._view.transform.bind(this._view))),!s)return;this._selected.push(s),this._selected.length==this._types.length&&(this._object=this.construct(...this._selected),this._callback&&this._callback(this._object),this._selected=[]);let r="";this._selected.forEach(((t,e)=>{r+="Selected "+this.typeName(this._types[e])+" "+t.label()+". "})),r+="Select a "+this.typeName(this._types[this._selected.length]),this._view.message(r),this._view.setHighlighter(this.highlighter(this._types[this._selected.length]))}getObject(){return this._object}}class d extends _{constructor(t,e,i){super(t,"pp",e,i)}construct(t,e){return s.jv(t,e)}}class p extends _{constructor(t,e,i){super(t,"pp",e,i)}construct(t,e){return s.H2(t,e)}}class m extends _{constructor(t,e,i){super(t,"pp",e,i)}construct(t,e){return s.YF(t,e)}}class b extends _{constructor(t,e,i){super(t,"pp",e,i)}construct(t,e){return s.Xw(t,e)}}class f extends _{constructor(t,e,i){super(t,"pl",e,i)}construct(t,e){return s.sk(e,t)}}class v extends _{constructor(t,e,i){super(t,"pl",e,i)}construct(t,e){return s.Mf(e,t)}}class w extends _{constructor(t,e,i){super(t,"ll",e,i)}construct(t,e){return s.Zt(t,e)}}class g extends _{constructor(t,e,i){super(t,"lcp",e,i)}construct(t,e,i){return s.jM(t,e,i)}}class y extends _{constructor(t,e,i){super(t,"ccp",e,i)}construct(t,e,i){return s.qw(t,e,i)}}class x{constructor(t,e,i,s){this._construction=t,this._view=e,this._tool_callback=s;const n=document.createElement("div");i.prepend(n);const r=this,o=document.createElement("button");o.innerHTML="drag",o.addEventListener("click",(function(){r._view.message(""),r.setTool(new u(r._view,r._construction))})),n.append(o);const c=document.createElement("button");c.innerHTML="line",c.addEventListener("click",(function(){r.setTool(new d(r._view,r._construction,r._tool_callback))})),n.append(c);const h=document.createElement("button");h.innerHTML="circle",h.addEventListener("click",(function(){r.setTool(new b(r._view,r._construction,r._tool_callback))})),n.append(h);const l=document.createElement("button");l.innerHTML="midpoint",l.addEventListener("click",(function(){r.setTool(new p(r._view,r._construction,r._tool_callback))})),n.append(l);const a=document.createElement("button");a.innerHTML="bisector",a.addEventListener("click",(function(){r.setTool(new m(r._view,r._construction,r._tool_callback))})),n.append(a);const _=document.createElement("button");_.innerHTML="perp",_.addEventListener("click",(function(){r.setTool(new f(r._view,r._construction,r._tool_callback))})),n.append(_);const x=document.createElement("button");x.innerHTML="parallel",x.addEventListener("click",(function(){r.setTool(new v(r._view,r._construction,r._tool_callback))})),n.append(x),n.append(document.createElement("br"));const j=document.createElement("button");j.innerHTML="intersectLL",j.addEventListener("click",(function(){r.setTool(new w(r._view,r._construction,r._tool_callback))})),n.append(j);const z=document.createElement("button");z.innerHTML="intersectLC",z.addEventListener("click",(function(){r.setTool(new g(r._view,r._construction,r._tool_callback))})),n.append(z);const P=document.createElement("button");P.innerHTML="intersectCC",P.addEventListener("click",(function(){r.setTool(new y(r._view,r._construction,r._tool_callback))})),n.append(P),[...n.getElementsByTagName("button")].forEach((t=>{t.style.fontSize="12px"}))}setTool(t){this._view.setTool(t)}}},512:(t,e,i)=>{function s(t){return t?t.replace(/([\w'()]+)_(\w)/g,"$1_{$2}"):""}function n(t){return t?s(t).replace(/([\w'()]+)_{(\w+)}/g,"$1$2"):""}i.d(e,{G:()=>h});var r=i(576);class o{constructor(t,e){if("string"==typeof t&&(t=document.getElementById(t)),t instanceof HTMLCanvasElement){this._canvas=t,this._container=document.createElement("div"),this._canvas.parentNode.replaceChild(this._container,this._canvas),this._container.append(this._canvas),this._container.style.width="500px";const e=document.getElementsByTagName("h1")[0];e.style.textAlign="center",e.style.marginTop="45px"}else this._container=t,this._canvas=document.createElement("canvas"),this._container.append(this._canvas),this._canvas.width=this._container.width,this._canvas.height=this._container.height;this._container.style.marginLeft="auto",this._container.style.marginRight="auto";const i=window.devicePixelRatio;e.width&&(this._canvas.width=e.width*i,this._canvas.style.width=e.width+"px"),e.height&&(this._canvas.height=e.height*i,this._canvas.style.height=e.height+"px"),this._canvas.getContext("2d").scale(i,i),e.border&&(this._canvas.style.border=e.border),this._defaultColor="black",this._defaultWidth=1,this._defaultDash=[];const s=document.createElement("p");this._p_status=s;const n=document.createElement("div");this._canvas.parentNode.replaceChild(n,this._canvas),n.style.position="relative",n.append(this._canvas),n.append(s),s.style.position="absolute",s.style.top="0px",s.style.left="0px",s.style.margin="5px",s.style.backgroundColor="white"}canvas(){return this._canvas}container(){return this._container}addEventListener(t,e){this._canvas.addEventListener(t,e)}width(){const t=window.devicePixelRatio;return this._canvas.width/t}height(){const t=window.devicePixelRatio;return this._canvas.height/t}context(){return this._canvas.getContext("2d")}clear(){this.context().clearRect(0,0,this.width(),this.height())}arc(t,e,i,s,n,o,c,h,l){o=o||this._defaultColor,c=c||this._defaultWidth,h=h||this._defaultDash,void 0===l&&(l=!1);const a=this.context();if(a.lineWidth=c,a.setLineDash(h),a.beginPath(),a.arc(t,e,i,s,n,!0),l){a.fillStyle=o,a.fill();const t=(0,r.Km)(o);a.strokeStyle=t?"rgba(0, 0, 0, "+t+")":"black",a.stroke()}else a.strokeStyle=o,a.stroke()}circle(t,e,i,s,n,r,o){this.arc(t,e,i,0,2*Math.PI,s,n,r,o)}segment(t,e,i,s,n,r,o){n=n||this._defaultColor,r=r||this._defaultWidth,o=o||this._defaultDash;const c=this.context();c.beginPath(),c.moveTo(t,e),c.lineTo(i,s),c.lineWidth=r,c.strokeStyle=n,c.setLineDash(o),c.stroke()}line_endpoints(t,e,i,s){const[n,r]=[this.width(),this.height()];if(t==i)return[t,0,t,r];if(e==s)return[0,e,n,e];{let o,c,h,l=[];function a(n){return[t+n*(i-t),e+n*(s-e)]}return o=(0-t)/(i-t),[c,h]=a(o),0<=h&&h<=r&&l.push.apply(l,[c,h]),o=(n-t)/(i-t),[c,h]=a(o),0<=h&&h<=r&&l.push.apply(l,[c,h]),4==l.length||(o=(0-e)/(s-e),[c,h]=a(o),0<=c&&c<=n&&l.push.apply(l,[c,h]),4==l.length||(o=(r-e)/(s-e),[c,h]=a(o),0<=c&&c<=n&&l.push.apply(l,[c,h]))),l}}line(t,e,i,s,n,r,o){const[c,h,l,a]=this.line_endpoints(t,e,i,s);this.segment(c,h,l,a,n,r,o)}line_label(t,e,i,s,n,r){let o,c,[h,l,a,u]=this.line_endpoints(t,e,i,s).map((t=>Math.round(t)));l>u&&([h,l]=[a,u]),0==h?(o=0,c=l):h==this.width()&&(o=this.width()-15,c=l),0==l?(o=h,c=15):l==this.height()&&(o=h,c=this.height()-15),this.text(o,c,r,"15px Arial",n)}text(t,e,i,s,n){const r=this.context();r.font=s||"15px Arial",r.strokeStyle="white",r.lineWidth=3,r.lineJoin="miter",r.miterLimit=2,r.strokeText(i,t,e),n&&(r.fillStyle=n),r.fillText(i,t,e)}message(t){var e;this._p_status.innerHTML=(e=t)?s(e).replace(/([\w'()]+)_{(\w+)}/g,"$1<sub>$2</sub>"):""}}var c=i(445);class h{constructor(t,e,i,s,n,r,h){2==arguments.length&&([i,s]=[-5,5],[n,r]=[-5,5]),this._canvas=new o(t,e),this.setZoom(i,s,n,r),this._constructions=[],this._x=this._y=void 0,this._highlighter=null,this._tool=h||new c.$(this),this._startPan=void 0,this.addEventListener("mousemove",this.mousemove.bind(this),!1),this.addEventListener("mousedown",this.mousedown.bind(this),!1),this.addEventListener("mouseup",this.mouseup.bind(this),!1),document.body.addEventListener("keydown",this.keydown.bind(this),!1)}addConstruction(t){this._constructions.push(t)}setZoom(t,e,i,s){this._xmin=t,this._xmax=e,this._ymin=i,this._ymax=s,window.devicePixelRatio,this._scalex=this._canvas.width()/(e-t),this._scaley=this._canvas.height()/(s-i),this._x0=-t*this._scalex,this._y0=s*this._scaley}zoom(t){const e=this._xmax-this._xmin,i=this._ymax-this._ymin,s=(this._xmin+this._xmax)/2,n=(this._ymin+this._ymax)/2;this.setZoom(s-e/(2*t),s+e/(2*t),n-i/(2*t),n+i/(2*t)),this.redraw()}pan(t,e){const i=e.X-t.X,s=e.Y-t.Y,n=this._canvas.width(),r=(this._canvas.height(),-i/n*(this._xmax-this._xmin)),o=s/n*(this._xmax-this._xmin);this.setZoom(this._xmin+r,this._xmax+r,this._ymin+o,this._ymax+o),this.redraw()}redraw(){this._constructions.forEach((t=>{t.draw()}))}canvas(){return this._canvas}addEventListener(t,e){this._canvas.addEventListener(t,e)}clear(){this._canvas.clear()}transform(t,e){return[this._x0+t*this._scalex,this._y0-e*this._scaley]}transformInverse(t,e){return[(t-this._x0)/this._scalex,(this._y0-e)/this._scaley]}point(t,e,i){const s=(i=i||{}).size||1,[n,r]=this.transform(t,e);this._canvas.circle(n,r,4*s,i.color,void 0,void 0,!0)}text(t,e,i){i=n(i);const[s,r]=this.transform(t,e);this._canvas.text(s+8,r+8,i)}segment(t,e,i,s,n){n=n||{};const[r,o]=this.transform(t,e),[c,h]=this.transform(i,s);this._canvas.segment(r,o,c,h,n.color,n.width,n.dash)}line(t,e,i,s,n){n=n||{};const[r,o]=this.transform(t,e),[c,h]=this.transform(i,s);this._canvas.line(r,o,c,h,n.color,n.width,n.dash)}circle(t,e,i,s){s=s||{};const[n,r]=this.transform(t,e),o=i*this._scalex;this._canvas.circle(n,r,o,s.color,s.width,s.dash)}line_label(t,e,i,s,r,o){o=n(o);const[c,h]=this.transform(t,e),[l,a]=this.transform(i,s);this._canvas.line_label(c,h,l,a,r,o)}setHighlighter(t){this._highlighter=t}highlight(t,e){this._highlighter&&this._constructions.forEach((i=>{i.highlight(t,e,this.transform.bind(this),this._highlighter)}))}message(t){this._canvas.message(t)}setTool(t){this._tool=t}getMousePosition(t){return{X:t.offsetX,Y:t.offsetY}}mousemove(t){const e=this.getMousePosition(t);this.highlight(e.X,e.Y),this._startPan&&(this.pan(this._startPan,e),this._startPan=e),this._tool&&this._tool.mousemove(t)}mousedown(t){if(t.ctrlKey&&(this._startPan=this.getMousePosition(t)),t.shiftKey){const e=this.getMousePosition(t),i=this._constructions[0].findObjectsAt(e.X,e.Y,this.transform.bind(this));let s="";i.forEach((t=>{s+=t.describe()+"<br>"})),this.message(s)}this._tool&&this._tool.mousedown(t)}mouseup(t){this._startPan&&(this.pan(this._startPan,this.getMousePosition(t)),this._startPan=void 0),this.message(""),this._tool&&this._tool.mouseup(t)}keydown(t){t.ctrlKey&&"NumpadAdd"==t.code?(t.preventDefault(),this.zoom(1.5)):t.ctrlKey&&"NumpadSubtract"==t.code&&(t.preventDefault(),this.zoom(1/1.5)),this._tool&&this._tool.keydown(t)}}}},i={};function s(t){var n=i[t];if(void 0!==n)return n.exports;var r=i[t]={exports:{}};return e[t](r,r.exports,s),r.exports}s.m=e,t=[],s.O=(e,i,n,r)=>{if(!i){var o=1/0;for(a=0;a<t.length;a++){for(var[i,n,r]=t[a],c=!0,h=0;h<i.length;h++)(!1&r||o>=r)&&Object.keys(s.O).every((t=>s.O[t](i[h])))?i.splice(h--,1):(c=!1,r<o&&(o=r));if(c){t.splice(a--,1);var l=n();void 0!==l&&(e=l)}}return e}r=r||0;for(var a=t.length;a>0&&t[a-1][2]>r;a--)t[a]=t[a-1];t[a]=[i,n,r]},s.d=(t,e)=>{for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t={367:0,478:0};s.O.j=e=>0===t[e];var e=(e,i)=>{var n,r,[o,c,h]=i,l=0;if(o.some((e=>0!==t[e]))){for(n in c)s.o(c,n)&&(s.m[n]=c[n]);if(h)var a=h(s)}for(e&&e(i);l<o.length;l++)r=o[l],s.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return s.O(a)},i=self.webpackChunkArgoDG=self.webpackChunkArgoDG||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})();var n={};return(()=>{s.r(n),s.d(n,{AnimationButtons:()=>e.N,ConstructionToolbar:()=>i.l,If:()=>t.If,addObject:()=>t.rW,animate:()=>t.jt,animationButtons:()=>t.KM,circle:()=>t.Xw,construction:()=>t.lZ,constructionToolbar:()=>t.lI,draw:()=>t.ii,findCircleAt:()=>t.qS,findFreePointAt:()=>t.LW,findLineAt:()=>t.hB,findObjectsAt:()=>t.Pd,findPointAt:()=>t.q3,intersectCC:()=>t.Pw,intersectLC:()=>t.PR,intersectLL:()=>t.Zt,line:()=>t.jv,nextAnimationStep:()=>t.ES,poincareCircle:()=>t.i7,poincareLine:()=>t.V_,point:()=>t.xm,prevAnimationStep:()=>t.d2,randomPoint:()=>t.dt,segment:()=>t.EX,setup:()=>t.cY,view:()=>t.ei});var t=s(102),e=s(83),i=s(445)})(),s.O(n)})()));